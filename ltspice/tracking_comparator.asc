Version 4
SHEET 1 1004 7056
WIRE 320 -64 -48 -64
WIRE 0 32 0 16
WIRE -48 48 -48 -64
WIRE -32 48 -48 48
WIRE 720 48 720 16
WIRE 64 64 32 64
WIRE 320 64 320 -64
WIRE 320 64 128 64
WIRE 480 64 320 64
WIRE 688 64 480 64
WIRE -240 80 -352 80
WIRE -128 80 -160 80
WIRE -32 80 -128 80
WIRE 896 80 752 80
WIRE 320 96 320 64
WIRE 480 96 480 64
WIRE 688 96 656 96
WIRE -128 112 -128 80
WIRE 0 112 0 96
WIRE 720 144 720 112
WIRE 320 176 320 160
WIRE 480 208 480 176
WIRE -128 224 -128 192
WIRE -352 304 -352 80
WIRE 656 304 656 96
WIRE 656 304 -352 304
WIRE 80 432 -112 432
WIRE 240 432 160 432
WIRE -912 512 -912 464
WIRE -352 528 -352 304
WIRE -224 528 -352 528
WIRE -112 528 -112 432
WIRE -112 528 -144 528
WIRE 16 528 -112 528
WIRE 112 528 80 528
WIRE 240 528 240 432
WIRE 240 528 192 528
WIRE 416 528 240 528
WIRE -352 560 -352 528
WIRE 240 576 240 528
WIRE -912 608 -912 592
WIRE 240 656 240 640
WIRE 496 656 496 624
WIRE -352 672 -352 640
WIRE 416 672 416 528
WIRE 464 672 416 672
WIRE 672 688 528 688
WIRE 464 704 416 704
WIRE 496 752 496 720
WIRE -112 784 -112 528
WIRE 48 784 -112 784
WIRE 240 784 128 784
WIRE 416 784 416 704
WIRE 416 784 240 784
WIRE 240 800 240 784
WIRE 240 896 240 864
FLAG 240 656 0
FLAG -352 672 0
FLAG 240 896 0
FLAG 496 752 0
FLAG 496 624 3v3
FLAG -912 608 0
FLAG -912 464 3v3
FLAG 0 112 0
FLAG 0 16 3v3
FLAG 320 176 0
FLAG -128 224 0
FLAG 480 208 0
FLAG 720 144 0
FLAG 720 16 3v3
SYMBOL res 208 512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL schottky 16 544 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 176 416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL cap 224 576 R0
SYMATTR InstName C1
SYMATTR Value 100p
SYMBOL voltage -352 544 R0
WINDOW 3 -129 172 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 0.01 0 10n 200n 0.5u 1u)
SYMBOL res 144 768 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL cap 224 800 R0
SYMATTR InstName C2
SYMATTR Value 10p
SYMBOL voltage -912 496 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 3.3
SYMBOL OpAmps\\UniversalOpAmp2 496 688 R0
SYMATTR InstName U2
SYMATTR Value2 Avol=100Meg GBW=100Meg Slew=1G
SYMBOL res -128 512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL OpAmps\\UniversalOpAmp2 0 64 R0
SYMATTR InstName U1
SYMATTR Value2 Avol=1Meg GBW=10G Slew=10G
SYMBOL schottky 64 80 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 304 96 R0
SYMATTR InstName C3
SYMATTR Value 1n
SYMBOL res -144 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL res -144 96 R0
SYMATTR InstName R6
SYMATTR Value 200k
SYMBOL res 464 80 R0
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL OpAmps\\UniversalOpAmp2 720 80 R0
SYMATTR InstName U3
SYMATTR Value2 Avol=10Meg GBW=1G Slew=1G
TEXT -482 920 Left 2 !.tran 0 20u 0 10n
TEXT -32 1272 Left 2 !.model SN74LVC1G3157 SW(Ron=6 Roff=1G Vt=1.65 Vh=0.66)
TEXT 616 584 Left 2 ;Standard Leaky Comparator
TEXT 680 224 Left 2 ;Buffered Leaky Comparator
TEXT -240 264 Left 2 ;NOTE: This doesn't work well when there is a DC bias to the pulses.
