Version 4
SHEET 1 936 7056
WIRE 80 432 -112 432
WIRE 240 432 160 432
WIRE -912 512 -912 464
WIRE -224 528 -352 528
WIRE -112 528 -112 432
WIRE -112 528 -144 528
WIRE 16 528 -112 528
WIRE 112 528 80 528
WIRE 240 528 240 432
WIRE 240 528 192 528
WIRE 416 528 240 528
WIRE -352 560 -352 528
WIRE 240 576 240 528
WIRE -912 608 -912 592
WIRE 240 656 240 640
WIRE 496 656 496 624
WIRE -352 672 -352 640
WIRE 416 672 416 528
WIRE 464 672 416 672
WIRE 672 688 528 688
WIRE 464 704 416 704
WIRE 496 752 496 720
WIRE -112 784 -112 528
WIRE 48 784 -112 784
WIRE 240 784 128 784
WIRE 416 784 416 704
WIRE 416 784 240 784
WIRE 240 800 240 784
WIRE 240 896 240 864
FLAG 240 656 0
FLAG -352 672 0
FLAG 240 896 0
FLAG 496 752 0
FLAG 496 624 3v3
FLAG -912 608 0
FLAG -912 464 3v3
SYMBOL res 208 512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL schottky 16 544 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 176 416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL cap 224 576 R0
SYMATTR InstName C1
SYMATTR Value 100p
SYMBOL voltage -352 544 R0
WINDOW 3 -129 172 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 0.1 0 10n 200n 0.5u 1u)
SYMBOL res 144 768 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL cap 224 800 R0
SYMATTR InstName C2
SYMATTR Value 10p
SYMBOL voltage -912 496 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 3.3
SYMBOL OpAmps\\UniversalOpAmp2 496 688 R0
SYMATTR InstName U2
SYMATTR Value2 Avol=100Meg GBW=100Meg Slew=1G
SYMBOL res -128 512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
TEXT -482 920 Left 2 !.tran 0 20u 0 10n
TEXT -240 1328 Left 2 !.SUBCKT MCP6566 1 2 3 4 5\n*               | | | | |\n*               | | | | Output\n*               | | | Negative Supply\n*               | | Positive Supply\n*               | Inverting Input\n*               Non-inverting Input\n*\n********************************************************************************\n* Software License Agreement                                                   *\n*                                                                              *\n* The software supplied herewith by Microchip Technology Incorporated (the     *\n* 'Company') is intended and supplied to you, the Company's customer, for use  *\n* soley and exclusively on Microchip products.                                 *\n*                                                                              *\n* The software is owned by the Company and/or its supplier, and is protected   *\n* under applicable copyright laws. All rights are reserved. Any use in         *\n* violation of the foregoing restrictions may subject the user to criminal     *\n* sanctions under applicable laws, as well as to civil liability for the       *\n* breach of the terms and conditions of this license.                          *\n*                                                                              *\n* THIS SOFTWARE IS PROVIDED IN AN 'AS IS' CONDITION. NO WARRANTIES, WHETHER    *\n* EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED TO, IMPLIED        *\n* WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE APPLY TO  *\n* THIS SOFTWARE. THE COMPANY SHALL NOT, IN ANY CIRCUMSTANCES, BE LIABLE FOR    *\n* SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.     *\n********************************************************************************\n*\n* The following op-amps are covered by this model:\n*      MCP6566/6R/6U/7/9\n*\n*\n* Revision History:\n*      REV A: 14-Mar-11, Created model\n*      REV B: 09-Apr-11, Fixed output voltage swing      \n*\n* Recommendations:\n*      Use PSPICE (or SPICE 2G6; other simulators may require translation)\n*      For a quick, effective design, use a combination of: data sheet\n*            specs, bench testing, and simulations with this macromodel\n*      For high impedance circuits, set GMIN=100F in the .OPTIONS statement\n*      Can disable Hysteresis for faster response in large circuits by adding comments\n*      in front of statements flagged below\n*\n* Supported:\n*      Typical performance for temperature range (-40 to 125) degrees Celsius\n*      DC, AC, Transient, and Noise analyses.\n*      Most specs, including: offsets, DC PSRR, DC CMRR, input impedance,\n*            open loop gain, voltage ranges, supply current, ... , etc.\n*      Temperature effects for Ibias, Iquiescent, Iout short circuit \n*            current, Vsat on both rails, Slew Rate vs. Temp and P.S.\n*\n* Not Supported:\n*      Some Variation in specs vs. Power Supply Voltage\n*      Vos distribution, Ib distribution for Monte Carlo\n*      Distortion (detailed non-linear behavior)\n*      Some Temperature analysis\n*      Process variation\n*      Behavior outside normal operating region\n*\n* Input Stage\nV10  3 10 -450M\nR10 10 11 690K\nR11 10 12 690K\nG10 10 11 10 11 144U\nG11 10 12 10 12 144U\nC11 11 12 576E-18\nC12  1  0 4.00P\n*E12 71 14 POLY(6) 20 0 21 0 22 0 23 0 26 0 27 0   2.1M 86.2K 86.2K 86.2K 86.2K 1 1\nE12 71 14 POLY(7) 20 0 21 0 22 0 23 0 26 0 27 0 111 0\n+ 1.5M 55 55 15 15 1 1 -.5M\n* LINE ABOVE FOR HYSTERESIS, LINE BELOW FOR NO HYSTERESIS\n*+ 1.5M 55 55 15 15 1 1 0\nG12 1 0 62 0 1m\nG13 1 2 63 0 1u\nM12 11 14 15 15 NMI \nM14 12 2 15 15 NMI \nG14 2 0 62 0 1m\nC14  2  0 4.00P\nI15 15 4 50.0U\nV16 16 4 -250M\nGD16 16 1 TABLE {V(16,1)} ((-100,-100E-15)(0,0)(1m,1u)(2m,1m)) \nV13 3 13 -250M\nGD13 2 13 TABLE {V(2,13)} ((-100,-100E-15)(0,0)(1m,1u)(2m,1m)) \nR71  1  0 10.0E12\nR72  2  0 10.0E12\nR73  1  2 10.0E12\n*C13  1  2 1.00E-15\n*\n* Noise, PSRR, and CMRR\nI20 21 20 423U\nD20 20  0 DN1\nD21  0 21 DN1\nI22 22 23 1N\nR22 22 0  1k\nR23  0 23 1k\nG26  0 26 POLY(2) 3 0 4 0   0.00 -316U -316U\nR26 26  0 1\nG27  0 27 POLY(2) 1 0 2 0  -2.75M 158U 158U\nR27 27  0 1\n*\n* Open Loop Gain, Slew Rate\nG30  0 30 12 11 1\nR30 30  0 1.00K\nG31 0 31 3 4 18.5\nI31 0 31 DC -4.17\nR31 31  0 1 TC=0.00,0.00\nGD31 30 0 TABLE {V(30,31)} ((-100,-1n)(0,0)(1m,0.1)(2m,2))\nG32 32 0 3 4 18.5\nI32 32 0 DC -4.17\nR32 32  0 1 TC=0.00,0.00\nGD32 0 30 TABLE {V(30,32)} ((-2m,2)(-1m,0.1)(0,0)(100,-1n))\nG33  0 33 30 0 1m\nR33  33 0 1K\nG34  0 34 33 0 1.00\nR34  34 0 1K\nC34  34 0 353N\nG37  0 37 34 0 1m\nR37  37 0 1K\nC37  37 0 15.9E-15\nG38  0 38 37 0 1m\nR38  39 0 1K\nL38  38 39 15.9N\nE38  35 0 38 0 1\nG35 33 0 TABLE {V(35,3)} ((-1,-1n)(0,0)(2.00,1n))(2.2,1))\nG36 33 0 TABLE {V(35,4)} ((-2.2,-1)((-2.00,-1n)(0,0)(1,1n))\n*\n* Output Stage\nR80 50 0 100MEG\nG50 0 50 57 96 2\nR58 57  96 0.50\nR57 57  0 10.0\nC58  5  0 2.00P\nG57  0 57 POLY(3) 3 0 4 0 35 0 0 37.5M 50.0M 100M\nGD55 55 57 TABLE {V(55,57)} ((-2m,-1)(-1m,-1m)(0,0)(10,1n))\nGD56 57 56 TABLE {V(57,56)} ((-2m,-1)(-1m,-1m)(0,0)(10,1n))\nE55 55  0 POLY(2) 3 0 51 0 0.00 1 -100K\nE56 56  0 POLY(2) 4 0 52 0 1.36M 1 -17.8M\nR51 51 0 1k\nR52 52 0 1k\nGD51 50 51 TABLE {V(50,51)} ((-10,-1n)(0,0)(1m,1m)(2m,1))\nGD52 50 52 TABLE {V(50,52)}  ((-2m,-1)(-1m,-1m)(0,0)(10,1n))\nG53  3  0 POLY(1) 51 0  -50.0U 1M\nG54  0  4 POLY(1) 52 0  -50.0U -1M\n*\n* Current Limit\nG99 96 5 99 0 1\nR98 0 98 1 TC=-1.00M,2.20U\nG97 0 98 TABLE { V(96,5) } ((-11.0,-6.5M)(-1.00M,-6.43M)(0,0)(1.00M,6.43M)(11.0,6.5M))\n*E97 99 0 VALUE { V(98)*((V(3)-V(4))*2.39 + -3.30)}\nE97 99 0 VALUE { V(98)*LIMIT(((V(3)-V(4))*2.39 + -3.30),0.00,1E6)}\nD98 4 5 DESD\nD99 5 3 DESD\n*\n* Temperature / Voltage Sensitive IQuiscent\nR61 0 61 1 TC=2.36M,-625N\nG61 3 4 61 0 1\nG60 0 61 TABLE {V(3, 4)} \n+ ((0,0)(800M,930N)(1.8,88.0U)(2.00,89.0U)\n+ (3.00,90.0U)(5.00,94.0U)(6.00,97.0U))\n*\n* Temperature Sensitive offset voltage\nI73 0 70 DC 1uA\n*R74 0 70 1 TC=2.00\nR74 0 70 1 TC=0.00\nE75 1 71 70 0 1 \n*\n* Temp Sensistive IBias\nI62 0 62 DC 1uA\nR62 0 62 REXP  9.47302M\n*\n* Temp Sensistive Offset IBias\nI63 0 63 DC 1uA\nR63 0 63 250M TC=473M,5.03M\n*\n* Hysteresis\nG110 0 110 POLY(2) 3 0 4 0  10.1 -100M 100M\nR110 110 0 1 TC=1.8M,0\n*E111 111 0 VALUE { V(110) * SGN(V(57) }\n* LINE ABOVE CAUSED CONVERGENCE ERROR, USE TWO LINES BELOW INSTEAD\nE111 111 0 VALUE { V(110) * V(112) }\nE112 112 0 TABLE {V(120,0)} ((-1,1)(-1m,0.99)(1m,-0.99)(1,-1))\nC120  120 0  1u\nG120 0 120 TABLE {V(57,4)} ((-1m,-1)(1m,1))\nR120 0 120 1\nC121 121 120 2p\nC122 122 120 2p\nV121 121 0 1\nV122 122 0 -1\n* Node 120 above is output of FF.  Can substitute with node 57 for\n* direct input from output state.\n*\n* Hyst FF Node 120 is output of FF\n*X_U113 0 0 113 114 120 115 $G_DPWR $G_DGND DFFRSH\n*E114 114 0 TABLE {V(57,0)}((-1,-1n)(1m,0)(2m,4)(1,4.01))\n*R113 0 115 1k\n*E113 113 0 TABLE {V(57,0)}((-1,4.01)(-2m,4)(-1m,1n)(0,0))\n*\n*\n* Models\n.MODEL NMI NMOS(L=2.00U W=42.0U KP=20.0U LEVEL=1 )\n.MODEL DESD  D   N=1 IS=1.00E-15\n.MODEL DN1 D   IS=1P KF=50.0P AF=1\n.MODEL REXP  RES TCE= 4.41236\n.ENDS MCP6566
