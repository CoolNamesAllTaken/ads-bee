* C:\git-checkouts\ads-bee\ltspice\hysteresis_comparator.asc
V1 N005 0 PULSE(0 {v_dd} 0 10n 10n {t_on} {t_period})
R1 mtl_hi N005 10k
C1 mtl_hi 0 0.1µ IC=v_mtl
V2 in 0 PULSE(2.2 1.8 0 100n 100n 0.5u 1u)
V3 3v3 0 {v_dd}
XU1 N003 in 3v3 0 N001 level2 Avol=1Meg GBW=10G Slew=10G Ilimit=25m Rail=0 Vos=0 En=0 Enk=0 In=0 Ink=0 Rin=500Meg
R7 3v3 N001 1k
S1 mtl_hi N003 0 N001 SN74LVC1G3157
S2 mtl_lo N003 N001 0 SN74LVC1G3157
V4 mtl_lo 0 2.0
XU2 in rssi_hold 3v3 0 N004 level2 Avol=1Meg GBW=10G Slew=10G Ilimit=25m Rail=0 Vos=0 En=0 Enk=0 In=0 Ink=0 Rin=500Meg
D1 rssi_hold N004 1N4148
M1 rssi_hold N002 3v3 3v3 BSS84
C2 3v3 rssi_hold 22n
R2 _rssi_clear N002 115
R3 3v3 _rssi_clear 10k
V5 _rssi_clear 0 PULSE(3.3 0 65u 1n 1n 10u 1000u)
.model D D
.lib C:\Users\jkail\Documents\LTspiceXVII\lib\cmp\standard.dio
.model NMOS NMOS
.model PMOS PMOS
.lib C:\Users\jkail\Documents\LTspiceXVII\lib\cmp\standard.mos
* RC Lowpass f_c=159Hz
.param f_sw=25k v_mtl=1.9 v_dd=3.3 t_period={1/f_sw} t_on={v_mtl/v_dd*t_period} t_off={1-t_on}
.tran 0 1m 0 10n
* The big danger is that out could pull mtl up too far!
.model custom_zener ako: 1N750 bv=2.2
.model SN74LVC1G3157 SW(Ron=6 Roff=1G Vt=1.65 Vh=0.66)
.lib UniversalOpAmp2.lib
.backanno
.end
